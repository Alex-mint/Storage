{% extends 'main/base.html' %}
{% load static %}
{% block content %}

{% if messages %}
     {% for message in messages %}
         <div class="container">
             <div class="alert alert-success alert-dismissible fade show" role="alert">
		             <center><h5>{{ message }}</h5></center>
                 <button type="button" class="btn-close" data-bs-dismiss="alert" aria-lable="Close"></button>
             </div>
         </div>
     {% endfor %}
{% endif %}

<div class="cart-area pt-100 pb-100">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                            <div class="cart-table-content">
                                <div class="table-content table-responsive">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th class="width-thumbnail">Product</th>
                                                <th class="width-price"> Price</th>
                                                <th class="width-quantity">Quantity</th>
                                                <th class="width-quantity">Months</th>
		                                            <th class="width-thumbnail">Action</th>
                                                <th class="width-subtotal">Subtotal</th>
                                                <th class="width-remove"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in cart.products.all %}
                                            <tr>

                                                <td class="product-name">
                                                    <h5><a href="product-details.html">{{item.item.title}}</a></h5>
                                                </td>
                                                <td class="product-cart-price"><span class="amount">{{item.item.price|floatformat:2}}€</span></td>
                                                <td class="cart-quality">

                                                   <form action="{% url 'change_qty' slug=item.item.slug %}" method="POST">
                                                    {% csrf_token %}

                                                     <input type="number" class="form-control" name="qty" style="width: 70px;" min="1" value="{{ item.qty }}">
		                                                  </td>
		                                            <td class="cart-quality">
                                                    <input type="number" class="form-control" name="month" style="width: 70px;" min="1" value="{{ item.month }}">
                                                </td>
		                                            <td class="cart-quality">
                                                     <input type="submit" class="cart-clear btn-hover" value="Изменить кол-во">
                                                    </form>




                                                </td>
                                                <td class="product-total"><span>{{item.final_price|floatformat:2}}€</span></td>
                                                <td class="product-remove"><a href="{% url 'delete_from_cart' slug=item.item.slug %}"><i class=" ti-trash "></i></a></td>
                                            </tr>
                                            {% endfor %}
                                            <tr>
                                                <td class="product-thumbnail">
                                                </td>
                                                <td class="product-name">
                                                </td>
                                                <td class="product-cart-price"></td>
                                                <td class="cart-quality">

                                                </td>
		                                            <td class="cart-quality"><h5>Items: <strong>{{cart.total_products}}</strong></h5>
                                                </td>
                                                <td class="product-total"><h5>Total:<strong> ${{cart.final_price|floatformat:2}}</strong></h5></td>
                                                <td class="product-remove"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="cart-shiping-update-wrapper">
                                        <div class="cart-shiping-update btn-hover">
                                            <a href="{% url 'home' %}">Continue Shopping</a>
                                        </div>
                                        <div class="cart-clear-wrap">
                                            <div class="cart-clear btn-hover">
                                                <a href="{% url 'checkout' %}">Checkout</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>

            </div>
        </div>


{% endblock content %}
